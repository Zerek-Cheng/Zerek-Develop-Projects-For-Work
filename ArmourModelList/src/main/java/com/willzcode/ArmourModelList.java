/*
 * Decompiled with CFR 0_133.
 *
 * Could not load the following classes:
 *  com.google.common.io.ByteArrayDataOutput
 *  com.google.common.io.ByteStreams
 *  org.bukkit.Bukkit
 *  org.bukkit.Material
 *  org.bukkit.Server
 *  org.bukkit.command.Command
 *  org.bukkit.command.CommandSender
 *  org.bukkit.configuration.file.FileConfiguration
 *  org.bukkit.entity.Player
 *  org.bukkit.event.EventHandler
 *  org.bukkit.event.Listener
 *  org.bukkit.event.player.PlayerJoinEvent
 *  org.bukkit.inventory.Inventory
 *  org.bukkit.inventory.InventoryView
 *  org.bukkit.inventory.ItemStack
 *  org.bukkit.inventory.meta.ItemMeta
 *  org.bukkit.inventory.meta.SkullMeta
 *  org.bukkit.plugin.Plugin
 *  org.bukkit.plugin.PluginManager
 *  org.bukkit.plugin.java.JavaPlugin
 *  org.bukkit.scheduler.BukkitScheduler
 *  org.bukkit.scheduler.BukkitTask
 */
package com.willzcode;

import com.google.common.io.ByteArrayDataOutput;
import com.google.common.io.ByteStreams;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.io.Reader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.List;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.Server;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerJoinEvent;
import org.bukkit.inventory.Inventory;
import org.bukkit.inventory.InventoryView;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.ItemMeta;
import org.bukkit.inventory.meta.SkullMeta;
import org.bukkit.plugin.Plugin;
import org.bukkit.plugin.PluginManager;
import org.bukkit.plugin.java.JavaPlugin;
import org.bukkit.scheduler.BukkitScheduler;
import org.bukkit.scheduler.BukkitTask;

public class ArmourModelList
        extends JavaPlugin
        implements Listener {
    private String apikey = "";
    private final int ITEM_PER_PAGE = 54;

    @Override
    public void onDisable() {
    }

    @Override
    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {
        if (sender instanceof Player && sender.isOp()) {
            int page = 0;
            if (args.length > 0) {
                try {
                    page = Integer.parseInt(args[0]);
                } catch (Exception ignored) {
                    // empty catch block
                }
            }
            int finalPage = page;
            this.getServer().getScheduler().runTaskLaterAsynchronously((Plugin) this, () -> {
                List<Integer> idList = ArmourModelList.getModelIdList("http://www.iicraft.com/armor/list.php?k=" + this.apikey);
                if (idList.size() == 0) {
                    sender.sendMessage("error");
                    // sender.sendMessage("§6§l你的秘钥不正确！请联系qq3243309346购买使用权限！");
                    return;
                }
                int start = finalPage * 54;
                int end = start + 54;
                boolean hasNextPage = end < idList.size();
                Inventory showInv = Bukkit.createInventory(null, (int) 54, (String) ("§a§l时装模型列表" + (hasNextPage ? new StringBuilder().append(" §6下一页/aml ").append(finalPage + 1).toString() : "")));
                ((Player) sender).openInventory(showInv);
                int cur = 0;
                while (start + cur < end && start + cur < idList.size()) {
                    int ci = cur++;
                    this.getServer().getScheduler().runTaskLaterAsynchronously((Plugin) this, () -> {
                        ItemStack skull = new ItemStack(Material.SKULL_ITEM, 1, (short) 3);
                        SkullMeta sm = (SkullMeta) skull.getItemMeta();
                        sm.setDisplayName("§b§l(一直加载不出来说明死了)正在加载...模型:" + idList.get(start + ci));
                        skull.setItemMeta((ItemMeta) sm);
                        showInv.setItem(ci, skull);
                        sm.setDisplayName("§b§l模型编号:" + idList.get(start + ci));
                        sm.setOwner("sk" + idList.get(start + ci));
                        skull.setItemMeta((ItemMeta) sm);
                        showInv.setItem(ci, skull);
                    }, 0L);
                }
            }, 0L);
        }
        return true;
    }

    @Override
    public void onEnable() {
        Bukkit.getMessenger().registerOutgoingPluginChannel((Plugin) this, "armor_in");
        this.getServer().getPluginManager().registerEvents((Listener) this, (Plugin) this);
        this.saveDefaultConfig();
        this.reloadConfig();
        FileConfiguration config = this.getConfig();
        this.apikey = config.getString("api-key", "no-key");
    }

    @EventHandler
    public void onJoin(PlayerJoinEvent event) {
        this.getServer().getScheduler().runTaskLaterAsynchronously((Plugin) this, () -> {
            Player player = event.getPlayer();
            ByteArrayDataOutput out = ByteStreams.newDataOutput();
            out.writeByte(0);
            out.writeByte(0);
            out.writeUTF(ArmourModelList.get("http://www.iicraft.com/armor/list.php?k=" + this.apikey));
            player.sendPluginMessage((Plugin) this, "armor_in", out.toByteArray());
        }, 60L);
    }

    public static List<Integer> getModelIdList(String url) {
        String[] a;
        ArrayList<Integer> list = new ArrayList<Integer>();
        String res = ArmourModelList.get(url);
        for (String file : a = res.split(";")) {
            String b = file.split(":")[0];
            try {
                int i = Integer.parseInt(b);
                list.add(i);
            } catch (Exception e) {
                // empty catch block
            }
        }
        return list;
    }

    public static void main(String[] args) {
        System.out.println("DDD".hashCode());
    }

    private static String get(String req_url) {
        return "-10:873;-1001:707;-1002:685;-1003:509;-1004:525;-1005:540;-1006:413;-1006014450:4674;-1007:416;-1008:407;-1009:454;-1010:805;-1011:487;-1012:986;-1013:382;-1014:304;-1015:792;-1016:951;-1017:559;-1018:1386;-1019:639;-1020:2619;-1020113982:2141;-1020477753:765;-1021:644;-1022:629;-1023:1593;-1024:4775;-1025:3306;-1026:748;-1027:2938;-1028:3477;-1029:3266;-1030:3488;-1031:3270;-1032:1257;-1033:1360;-1034:2174;-1035:508;-1036:1660;-1037:2490;-1038:2863;-1039:1939;-1040:1016;-1041:3678;-1042:2078;-104260530:1243;-1043:2499;-1044:2976;-1045:2662;-1046:2080;-1047:548;-1048:6980;-1049:7691;-1050:3013;-1051:2666;-1052:2093;-1053:2371;-1054:1606;-11:465;-12:5437;-1273019386:745;-13:8160;-14:3525;-1405792160:453;-15:2093;-1520676790:5538;-1529089536:2871;-1564935600:10690;-16:844;-1614372145:6528;-1654132306:1817;-1661851042:1639;-1662159463:1111;-17:912;-172568407:4470;-1736678474:1476;-18:3368;-1808497640:3940;-1811688787:1796;-1823121829:2592;-1845940582:1465;-19:3552;-193194207:4972;-1940741652:1711;-1980266424:972;-1990043681:757;-20:809;-2001:1710;-2002:2464;-2003:1757;-2004:1372;-2005:606;-2006:855;-2007:2466;-2008:635;-2009:1276;-2010:628;-2011:1386;-2012:462;-2013:947;-2014:1147;-2015:1848;-2016:4450;-2017:723;-2018:2350;-2019:374;-2020:4740;-2021:300;-2022:3702;-2023:1820;-2024:1060;-2025:4928;-2026:4329;-2027:3298;-2028:1109;-2029:301;-2030:4269;-2031:752;-2032:2238;-2033:2882;-2034:646;-2035:1288;-2036:840;-2037:512;-2038:2203;-2039:440;-2040:236;-2041:785;-2042:2413;-2043:5253;-2044:877;-2045:640;-2046:1440;-2047:2035;-2048:854;-2049:605;-2050:1259;-2051:1848;-2052:1172;-2052285807:4861;-2053:1911;-2054:1532;-2055:1754;-2056:900;-2057:1652;-2058:324;-2059:1344;-2060:266;-2061:266;-2062:1636;-2062365573:4198;-2063:2314;-2064:2720;-2065:2011;-2066:1351;-2067:893;-2068:828;-2069:3982;-2070:2556;-2071:2111;-2072:3181;-2073:732;-2074:1317;-2075:467;-2076:3024;-2077:1975;-2078:709;-2079:4045;-2080:3324;-2081:4018;-2082:1098;-2083:446;-2084:304;-2085:442;-2086:8810;-2087:180;-2088:360;-2089:701;-2090:1405;-2091:1701;-2092:1835;-2093:3115;-2094:377;-2095:597;-2096:1305;-2097:724;-2097694294:2796;-2098:4499;-2099:2299;-21:416;-2100:8419;-2101:3982;-2102:1624;-2103:1390;-2104:4601;-2105:812;-2106:945;-2107:1018;-2108:955;-2109:1119;-2110:1117;-2111:1223;-2112:4095;-2113:1086;-2114:1089;-2115:1667;-2116:861;-2117:5026;-2118:1532;-2119:1519;-2120:711;-2121:1527;-2122:1247;-2123:1754;-2124:884;-2125:2894;-2126:3701;-2127:248;-2128:440;-2129:1060;-2130:835;-2131:6395;-2132:1699;-2133:649;-2134:6804;-2135:2765;-2136:854;-2137:610;-2138:1260;-2139:4306;-2140:462;-2141:418;-2142:3164;-2143:4726;-2144:691;-2145:8827;-2146:1937;-2147:2320;-2148:5321;-2149:2597;-2150:1333;-2151:697;-2152:513;-2153:379;-2154:662;-2155:1910;-2156:6078;-2157:1552;-2158:1189;-2159:2887;-2160:2359;-2161:2428;-2162:7575;-2163:2623;-2164:1072;-2165:2648;-2166:461;-2167:8162;-2168:3045;-2169:2039;-2170:695;-2171:3039;-2172:2730;-2173:988;-2174:350;-2175:546;-2176:423;-2177:3319;-2178:898;-2179:1945;-2180:1481;-2181:656;-2182:641;-2183:1156;-2184:3689;-2185:2640;-2186:798;-2187:5963;-2188:315;-2189:467;-2190:3432;-2191:1026;-2192:5030;-2193:4816;-2194:2248;-2195:2113;-2196:1326;-2197:1162;-2198:5818;-2199:1788;-22:776;-2200:949;-2201:624;-2202:642;-2203:287;-2204:1222;-2205:573;-2206:4176;-2207:1088;-2208:282;-2209:1192;-2210:383;-2211:912;-2212:2465;-2213:3983;-2214:2113;-2215:4008;-2216:10430;-2217:1043;-2218:1705;-2219:1769;-2220:1476;-2221:4128;-2222:2955;-2223:795;-2224:1683;-2225:4373;-2226:3368;-2227:5706;-2228:2105;-2229:4241;-2230:4373;-2231:5233;-2232:977;-2233:1263;-2234:1001;-2235:1194;-2236:1631;-2237:2158;-2238:2806;-2239:3053;-2240:6935;-2241:5742;-2242:3575;-2243:1602;-2244:2791;-2245:1579;-2246:3055;-2247:1925;-2248:1796;-2249:2012;-2250:2015;-2251:8254;-2252:3869;-2253:3692;-2254:3797;-2255:3760;-225520135:2879;-2256:394;-2257:3790;-2258:3809;-2259:2587;-2260:1146;-2261:959;-2262:1798;-2263:4385;-2264:1932;-2265:4102;-2266:1051;-2267:233;-2268:2301;-2269:3666;-2270:1107;-2271:301;-2272:1559;-2273:1981;-2274:1136;-2275:1640;-2276:2234;-2277:1151;-2278:260;-2279:1744;-2280:1767;-2281:1020;-2282:2469;-2283:2536;-2284:1063;-2285:357;-2286:731;-2287:802;-2288:1671;-2289:2862;-2290:2524;-2291:846;-2292:2989;-2293:991;-2294:1391;-2295:1004;-2296:1159;-2297:924;-2298:1955;-2299:1238;-23:779;-2300:850;-2301:375;-2302:1785;-2303:2439;-2304:912;-2305:516;-2306:3092;-2307:1273;-2308:813;-2309:2170;-2310:1518;-2311:609;-2312:795;-2313:569;-2314:546;-2315:594;-2316:1522;-2317:1329;-2318:837;-2319:2572;-2320:2046;-2321:6262;-2322:1259;-2323:1953;-2324:8037;-2325:2663;-2326:4340;-2327:2402;-2328:1289;-2329:902;-2330:1911;-2331:336;-2332:375;-2333:1843;-2334:1916;-2335:344;-2336:353;-2337:359;-2338:395;-2339:3748;-2340:878;-2341:401;-2342:1579;-2343:1738;-2344:1204;-2345:429;-2346:320;-2347:2904;-2348:1563;-2349:631;-2350:1475;-2351:3648;-2352:356;-2353:1083;-2354:354;-2355:2001;-2356:476;-2357:4140;-2358:621;-2359:444;-2360:2175;-2361:2747;-2362:4531;-2363:2979;-2364:1988;-2365:1629;-2366:924;-2367:4598;-2368:981;-2369:600;-2370:1199;-2371:813;-2372:849;-2373:597;-2374:920;-2375:925;-2376:5085;-2377:1319;-2378:2041;-2379:2203;-2380:2654;-2381:1248;-2382:1241;-2383:362;-2384:2246;-2385:389;-2386:392;-2387:374;-2388:478;-2389:359;-2390:5150;-2391:5150;-2392:2233;-2393:2233;-2394:1742;-2395:2172;-2396:2988;-2397:3946;-2398:1055;-2399:564;-24:909;-2400:422;-2401:2064;-2402:615;-2403:1774;-2404:369;-2405:1840;-2406:2335;-2407:2435;-2408:2074;-2409:1257;-2410:1947;-2411:351;-2412:179;-2413:379;-2414:130;-2415:375;-2416:757;-2417:1927;-2418:674;-2419:1004;-2420:2198;-2421:5268;-2422:419;-2423:2244;-2424:5434;-2425:2246;-2426:581;-2427:1732;-2428:831;-2429:1351;-2430:220;-2431:2955;-2432:1399;-2433:358;-2434:980;-2435:469;-2436:387;-2437:375;-2438:387;-2439:2823;-2440:1673;-2441:504;-2442:247;-2443:858;-2444:2119;-2445:420;-2446:532;-2447:841;-2448:532;-2449:728;-2450:396;-2451:716;-2452:398;-2453:2269;-2454:864;-2455:859;-2456:353;-2457:299;-2458:1702;-2459:299;-2460:668;-2461:1063;-2462:666;-2463:745;-2464:1413;-2465:750;-2466:767;-2467:415;-2468:1182;-2469:772;-2470:254;-2471:709;-2472:255;-2473:771;-2474:1293;-2475:773;-2476:1133;-2477:793;-2478:337;-2479:1565;-2480:1826;-2481:2075;-2482:2240;-2483:2076;-2484:1559;-2485:1469;-2486:1274;-2487:758;-2488:853;-2489:366;-2490:1045;-2491:3049;-2492:3641;-2493:1823;-2494:813;-2495:1281;-2496:964;-2497:1053;-2498:829;-2499:1016;-25:440;-2500:355;-2501:2582;-2502:2314;-2503:1374;-2504:498;-2505:856;-2506:1330;-2507:2260;-2508:2783;-2509:1493;-2510:532;-2511:422;-2512:867;-2513:2091;-2514:1993;-2515:3438;-2516:1129;-2517:306;-2518:1183;-2519:741;-2520:583;-2521:426;-2522:5170;-2523:1309;-2524:1810;-2525:2078;-2526:970;-2527:325;-2528:931;-2529:1224;-2530:3307;-2531:2835;-2532:986;-2533:4161;-2534:371;-2535:1825;-2536:287;-2537:948;-2538:1267;-2539:2857;-2540:2372;-2541:1627;-2542:1656;-2543:999;-2544:2637;-2545:1484;-2546:929;-2547:330;-2548:2171;-2549:2702;-2550:1980;-2551:911;-2552:678;-2553:212;-2554:1024;-2555:1435;-2556:2405;-2557:632;-2558:700;-2559:1180;-2560:1024;-2561:678;-2562:212;-2563:894;-2564:416;-2565:672;-2566:1180;-2567:2593;-2568:552;-2569:4230;-2570:2198;-2571:365;-2572:426;-2573:1680;-2574:1513;-2575:1429;-2576:1150;-2577:834;-2578:7634;-2579:2796;-2580:2796;-2581:889;-2582:797;-2583:949;-2584:4442;-2585:4390;-2586:1935;-2587:3216;-2588:1345;-2589:911;-2590:1856;-2591:388;-2592:388;-2593:3269;-2594:2052;-2595:2197;-2596:2509;-2597:762;-2598:1171;-2599:1913;-26:3555;-2600:1016;-2601:1935;-2602:754;-260205381:2550;-2603:259;-2604:1305;-2605:995;-2606:1312;-2607:966;-2608:1960;-2609:1156;-2610:2981;-2611:5953;-2612:1251;-2613:3732;-2614:1044;-2615:2302;-2616:991;-2617:1629;-2618:1353;-2619:4401;-2620:5839;-2621:9366;-2622:8891;-2623:6133;-2624:860;-2625:1816;-2626:741;-2627:539;-2628:1165;-2629:936;-2630:2169;-2631:744;-2632:182;-2633:1439;-2634:1791;-2635:3961;-2636:14046;-2637:1665;-2638:1703;-2639:2838;-2640:5346;-2641:1542;-2642:1612;-2643:1727;-2644:2434;-2645:4549;-2646:740;-2647:6054;-2648:2338;-2649:2572;-2650:3501;-2651:2856;-2652:2914;-2653:886;-2654:2128;-2655:2126;-2656:2469;-2657:1291;-27:3227;-28:2406;-29:3383;-3:3766;-30:595;-31:1252;-32:849;-33:993;-34:1337;-35:2504;-353636743:1004;-36:743;-363298375:1386;-37:1930;-38:1914;-39:2185;-395782947:6032;-4:1409;-40:5028;-41:3441;-42:639;-43:1797;-44:4917;-443470401:1565;-443470407:1554;-446877498:3431;-45:1376;-46:3447;-47:763;-48:1490;-49:1907;-496572566:920;-5:1253;-50:2237;-51:1404;-52:5832;-53:2029;-54:2106;-542437384:2578;-55:1749;-56:1505;-57:2128;-58:4674;-59:1555;-6:2615;-60:2776;-61:3659;-62:5083;-63:3924;-630124304:8058;-64:1251;-65:3524;-66:948;-67:715;-67642138:4080;-68:834;-69:781;-693337735:1464;-7:1967;-70:1901;-71:1138;-72:1473;-727876030:2937;-73:4238;-74:6355;-75:581;-76:3541;-766023139:791;-77543880:4181;-78:4165;-79:5403;-8:3283;-80:1393;-81:702;-82:1351;-83:3060;-84:1771;-85:4558;-85322856:1721;-86:967;-9:4383;-984799159:949;-985969940:840;1075315:672;1114687566:3946;1205342260:788;1271355888:315;1277303189:2031;130359142:6468;135053369:579;1365782673:915;1378039624:1815;1417383631:2141;1444880954:1766;1466532924:4716;1468472860:2826;1492665768:1394;1502780367:482;1534213223:789;1596576981:2705;1603133991:2979;1733194865:4528;1786223027:332;1822815131:1207;1856020250:5480;1875072240:1851;1900855427:2465;1910095042:1464;1982614470:8712;1997299577:1555;2019102926:9196;2097206040:363;21049080:3754;21049081:3485;21049082:1096;21049083:597;2125568236:4159;214085035:1463;218135253:1533;26718214:2315;26723459:710;351650006:1360;357564349:238;359628769:3687;366168305:1926;453464089:741;453647986:2544;509493616:3505;596774861:1746;615081033:4515;63955993:4358;685461816:3010;721085349:9933;721085355:9280;772640258:1718;787117471:674;79056829:2120;798133978:8754;798133991:1001;825453489:978;827556330:487;830501173:11742;837771521:4675;860847:1638;870613646:924;893242952:1961;909984367:3124;920388731:6027;9604781:1144";
    }
}

